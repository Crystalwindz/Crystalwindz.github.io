<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Go学习笔记"><meta name="keywords" content="Golang,笔记"><meta name="author" content="Crystalwindz,undefined"><meta name="copyright" content="Crystalwindz"><title>Go学习笔记 | Crystalwindz's Blog</title><link rel="shortcut icon" href="/favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.5.6"><link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.6"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="站点概览">文章详情</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#语法"><span class="toc-text">语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#接口"><span class="toc-text">接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#内存"><span class="toc-text">内存</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#工具"><span class="toc-text">工具</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#信道"><span class="toc-text">信道</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#map"><span class="toc-text">map</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#坑"><span class="toc-text">坑</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他"><span class="toc-text">其他</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#defer相关"><span class="toc-text">defer相关</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Effective-Go"><span class="toc-text">Effective Go</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://s1.ax1x.com/2018/04/09/CFFVpQ.jpg"></div><div class="author-info__name text-center">Crystalwindz</div><div class="author-info__description text-center">Talk is cheap. Show me the code.</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">21</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">27</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">12</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://s1.ax1x.com/2018/11/22/FPvENR.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Crystalwindz's Blog</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/about">About</a></span></div><div id="post-info"><div id="post-title">Go学习笔记</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-04-10</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Golang/">Golang</a><div class="post-meta-wordcount"><span>字数: </span><span class="word-count">1.3k</span><span class="post-meta__separator">|</span><span>阅读时长: 4 分钟</span></div></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><ul>
<li>for是Go中的while；</li>
<li>if可以在判断之前执行一条语句；</li>
<li>switch自动break，case无需为整数；</li>
<li>切片的cap就是切片能扩展的最大长度；</li>
<li>指针不能运算；</li>
<li>类型和函数不用先声明就能用；</li>
<li>Go里面没有隐式类型提升；</li>
<li>类型定义和类型方法必须在同一个包内；</li>
<li>.(type)类型选择必须和switch一起结合使用（泛型编程？）；</li>
<li><strong>无论是指针还是值，都可以直接通过 . 访问成员，Go自动(*p).x</strong>；</li>
<li><strong>类型方法也是，无论接受指针还是值，指针和值都可以直接调用，Go自动(*p).foo()或(&amp;a).foo()，这时的指针接受者可以理解为C++里的引用</strong>；</li>
</ul>
<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><ul>
<li><strong>接口指针永远无法满足接口</strong>；</li>
<li><strong>接口里存的永远是变量的具体类型，绝不可能是另一个接口类型，因此可以把接口类型和其他类型看做两种类型，接口是用来存其他类型的</strong>；</li>
<li><strong>实现接口时如果是指针类型，那么就只有类型指针满足接口，毕竟指针接口会更改原值</strong>；</li>
<li><strong>但实现接口时如果是值类型，那么类型和类型指针都满足接口，这时只需要传一个拷贝，那么是不是指针就无所谓了</strong>；</li>
<li>空接口interface{}可保存任意值；</li>
<li>接口类型可以内嵌其他接口，相当于把其他接口方法写在这里；</li>
</ul>
<a id="more"></a>
<h2 id="内存"><a href="#内存" class="headerlink" title="内存"></a>内存</h2><ul>
<li>Go中函数形参都是传值的；</li>
<li>slice、map、chan是引用类型；</li>
<li>nil指针是可以调用方法的，不会导致空指针异常，毕竟没有解引用（C++里是因为要先解引用才能调用成员函数，换句话说就是this指针不能为空）；</li>
<li>但nil指针是不能访问成员的，这会导致解引用空指针SIGSEGV；</li>
</ul>
<h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><ul>
<li>Go是静态编译的；</li>
<li>go install和go build的区别：从go help来看，go build会编译main包并将bin文件写到当前目录，如果编译的文件不是main包或是多个包，bulid只检查这些文件是否可编译，并不生成文件，并且build会忽略*_test.go文件，但在只编译一个包时可以指定-o强制build生成文件；go install会把二进制文件放在bin文件夹里，*.a文件放在pkg文件夹里；</li>
</ul>
<h2 id="信道"><a href="#信道" class="headerlink" title="信道"></a>信道</h2><ul>
<li><strong>信道上的发送操作总在对应的接收操作完成前发生</strong>；</li>
<li><strong>从无缓冲信道进行的接收，要发生在对该信道进行的发送完成之前</strong>；</li>
<li><strong>再解释一下上面两点，如果读一个ch，只有另一个go程对ch写了，读才能返回；如果写一个无缓冲ch，只有另一个go程对ch读了，写才能返回</strong>；</li>
<li><strong>就算r1监测到了w1，也不意味着r1之后的r2能检测到w0（应该是因为编译器调换了w之间的位置？）</strong>；</li>
<li><strong>nil chan永远不会准备好通信</strong>，这可以用在select里；</li>
<li>chan通过放置&lt;-的位置决定chan是只读还是只写还是双向；</li>
<li>Go程没有返回值，惯例是传入一个chan，通过这个chan发送返回值；</li>
</ul>
<h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><ul>
<li>map不是线程安全的，不过Go1.9里新加了sync.Map；</li>
<li>容量为0的map和nil map是两个东西，nil map是不能添加元素的；</li>
</ul>
<h2 id="坑"><a href="#坑" class="headerlink" title="坑"></a>坑</h2><ul>
<li>闭包和Go程一起使用时，当心<strong>不要让Go程共享一个变量</strong>，请传一个拷贝进去；</li>
<li><strong>string类型是不可变的</strong>，因此取s[i]的地址也是非法的；</li>
<li>接口内嵌和type alias时注意不要递归循环引用；</li>
<li>defer关闭句柄请按参数传入，函数体内直接用的话是引用，可能会在defer函数执行前被更改；</li>
</ul>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul>
<li>函数的最后一个参数如果是…T，这相当于[]T，说明可以用T类型的零个(nil)或多个参数调用函数；</li>
<li><strong>make([]int, 50, 100)和new([100]int)[0:50]是等价的</strong>；</li>
<li>type alias(Go 1.9)：使用type关键字时，如果是type A = int，那么A就是int的别名，这和type B int，定义了一个新类型B不一样；</li>
<li>假如有这样一个函数 func (t T) Foo(a int) int {}，那么T.Foo就是 func(t T, a int) int 这样一个函数，类似的如果是指针的话，就要(<em>T).Foo这样写，产生一个 func(t </em>T, a int) int 函数；</li>
</ul>
<h2 id="defer相关"><a href="#defer相关" class="headerlink" title="defer相关"></a>defer相关</h2><ul>
<li><a href="https://blog.csdn.net/Tybyqi/article/details/83827140" target="_blank" rel="noopener">defer实现原理剖析，写的相当不错</a></li>
<li>defer调用的函数的参数在defer语句时就已经确定；</li>
<li>defer后进先出；</li>
<li><strong>如果一个函数有命名返回值的话，那么在defer函数里是可以更改这个返回值的</strong>；</li>
<li>For instance, if the deferred function is a function literal and the surrounding function has named result parameters that are in scope within the literal, the deferred function may access and modify the result parameters before they are returned. If the deferred function has any return values, they are discarded when the function completes.</li>
</ul>
<h2 id="Effective-Go"><a href="#Effective-Go" class="headerlink" title="Effective Go"></a>Effective Go</h2><p>* </p>
</div></article><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Golang/">Golang</a><a class="post-meta__tags" href="/tags/笔记/">笔记</a></div><nav id="pagination"><div class="next-post pull-right"><a href="/socket_close_detail/"><span>从一道面试题入手——谈谈socket的关闭</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2019 By Crystalwindz</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="/js/third-party/anime.min.js"></script><script src="/js/third-party/jquery.min.js"></script><script src="/js/third-party/jquery.fancybox.min.js"></script><script src="/js/third-party/velocity.min.js"></script><script src="/js/third-party/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.5.6"></script><script src="/js/fancybox.js?version=1.5.6"></script><script src="/js/sidebar.js?version=1.5.6"></script><script src="/js/copy.js?version=1.5.6"></script><script src="/js/fireworks.js?version=1.5.6"></script><script src="/js/transition.js?version=1.5.6"></script><script src="/js/scroll.js?version=1.5.6"></script><script src="/js/head.js?version=1.5.6"></script><script src="/js/search/local-search.js"></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"right","width":110,"height":216,"hOffset":-12,"vOffset":-7},"mobile":{"show":false},"react":{"opacityDefault":0.9,"opacityOnHover":0.5},"log":false});</script></body></html>